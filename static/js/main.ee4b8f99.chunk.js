(this["webpackJsonpreact-game-cubes"]=this["webpackJsonpreact-game-cubes"]||[]).push([[0],{32:function(e,t,c){},33:function(e,t,c){"use strict";c.r(t);var n=c(0),s=c(1),a=c(8),r=c.n(a),i=c(2),o=c(17),l=c(3),d=c(4),b=c(5),u=c(15),j=c.n(u),m=function(e){return e.game.phase},O=function(e){return e.game.cubes},f=function(e){return e.game.points},h=function(e){return e.game.seconds},x=c(10),p={phase:Object(d.b)({name:"game",initialState:!1,reducers:{toggleStart:function(e){return!e}}}),cubes:Object(d.b)({name:"game",initialState:[],reducers:{initCubes:function(e,t){for(var c=t.payload,n=[];n.length!==c;){var s=Math.floor(100*Math.random());n.includes(s)||e.includes(s)||n.push(s)}return[].concat(Object(x.a)(e),n)},resetGame:function(){return[]},removeCube:function(e,t){var c=t.payload;return e.filter((function(e){return e!==c}))}}}),points:Object(d.b)({name:"game",initialState:0,reducers:{addPoint:function(e,t){return e+t.payload},resetGame:function(){return 0}}}),seconds:Object(d.b)({name:"game",initialState:-1,reducers:{startTimer:function(){return 60},updateTime:function(e){return e-1},resetGame:function(){return-1}}})},g=function(e){return e.stats.score},v={score:Object(d.b)({name:"stats",initialState:[],reducers:{inputName:function(e,t){var c=t.payload;return[].concat(Object(x.a)(e),[c])}}})},N={key:"game",storage:j.a},C=Object(l.c)({phase:p.phase.reducer,cubes:p.cubes.reducer,points:p.points.reducer,seconds:p.seconds.reducer}),y=Object(b.g)(N,C),w={key:"stats",storage:j.a},F=Object(l.c)({score:v.score.reducer}),S=Object(b.g)(w,F),E=Object(d.a)({reducer:{game:y,stats:S},middleware:Object(d.c)({serializableCheck:{ignoredActions:[b.a,b.f,b.b,b.c,b.d,b.e]}})}),k=Object(b.h)(E),M=c(6),T=function(e){var t=e.closeModal,c=Object(i.c)(f),a=Object(i.b)(),r=Object(s.useState)(""),o=Object(M.a)(r,2),l=o[0],d=o[1];return Object(n.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n={name:l,score:c};a(v.score.actions.inputName(n)),t()},className:"d-flex flex-column p-5",children:[Object(n.jsxs)("div",{className:"mb-5",children:["Your score: ",Object(n.jsx)("span",{children:c})]}),Object(n.jsxs)("div",{className:"form-group d-flex",children:[Object(n.jsx)("label",{htmlFor:"username",className:"mr-3 mb-5",children:"Name"}),Object(n.jsx)("input",{id:"username",name:"username",value:l,onChange:function(e){var t=e.target;d(t.value)},type:"text",className:"form-control"})]}),Object(n.jsx)("button",{type:"submit",className:"btn btn-bg btn-primary mx-auto",children:"SAVE"})]})},L=function(e){var t=e.children,c=e.closeModal,a=Object(s.useRef)(),r=Object(s.useCallback)((function(e){var t=e.target;a.current===t&&c()}),[c]),i=Object(s.useCallback)((function(e){"Escape"===e.code&&c()}),[c]);return Object(s.useEffect)((function(){return window.addEventListener("keydown",i),document.body.style.overflow="hidden",function(){window.removeEventListener("keydown",i),document.body.style.overflow="auto"}}),[i]),Object(n.jsx)("div",{className:"position-fixed d-flex justify-content-center align-items-center overlay w-100 h-100",ref:a,onClick:r,children:Object(n.jsx)("div",{className:"modal-dialog modal-dialog-centered",children:Object(n.jsx)("div",{className:"modal-content",children:t})})})},P=function(){var e=Object(i.c)(m),t=Object(i.c)(f),c=Object(i.c)(O),a=Object(i.c)(h),r=Object(i.b)(),o=Object(s.useState)(!1),l=Object(M.a)(o,2),d=l[0],b=l[1],u=function(){b((function(e){return!e}))};return Object(s.useEffect)((function(){var t;return a>0&&e&&(t=setTimeout((function(){r(p.seconds.actions.updateTime())}),1e3)),!a&&e&&(r(p.phase.actions.toggleStart()),b(!0)),function(){clearTimeout(t)}}),[e,a,r]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("header",{className:"jumbotron jumbotron-fluid px-5 py-3",children:Object(n.jsxs)("div",{className:"row justify-content-between",children:[Object(n.jsxs)("div",{className:"col-12 col-md-8",children:[Object(n.jsx)("h1",{className:"display-6 mb-0",children:"Remove cubes"}),Object(n.jsxs)("div",{className:"d-flex align-items-center justify-content-between text-center",children:[Object(n.jsxs)("div",{children:[Object(n.jsx)("button",{type:"button",className:"btn btn-primary mr-2 mr-md-3",onClick:function(){c.length||r(p.cubes.actions.initCubes(35)),-1===a&&r(p.seconds.actions.startTimer()),r(p.phase.actions.toggleStart())},disabled:!a,children:e?"PAUSE":"START"}),Object(n.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(){r(p.seconds.actions.resetGame()),e&&r(p.phase.actions.toggleStart()),r(p.points.actions.resetGame()),r(p.cubes.actions.resetGame()),r(p.cubes.actions.initCubes(35))},children:"NEW GAME"})]}),Object(n.jsxs)("div",{className:"d-inline-flex flex-column",children:[Object(n.jsx)("span",{className:"mb-2",children:"Points"}),Object(n.jsx)("span",{className:"border border-secondary rounded-lg bg-white p-2",children:t})]}),Object(n.jsxs)("div",{className:"d-inline-flex flex-column",children:[Object(n.jsx)("span",{className:"mb-2",children:"Time left"}),Object(n.jsxs)("span",{className:"border border-secondary rounded-lg bg-white p-2",children:[60===a||-1===a?1:0," :"," ",60===a||-1===a?"00":String(a).padStart(2,"0")]})]})]})]}),Object(n.jsx)("div",{className:"d-none d-md-block col-md-3 pt-2 pt-lg-4",children:"Lorem ipsum, dolor sit amet consectetur adipisicing elit"})]})}),d&&Object(n.jsx)(L,{closeModal:u,children:Object(n.jsx)(T,{closeModal:u})})]})},A=c(34),G=function(e){var t=e.cell,c=Object(i.b)(),a=Object(i.c)(m),r=Object(i.c)(O),o=Object(i.c)(h),l=Object(s.useState)(B.EMPTY),d=Object(M.a)(l,2),b=d[0],u=d[1],j=Object(s.useState)("transparent"),f=Object(M.a)(j,2),x=f[0],g=f[1],v=Object(s.useState)(0),N=Object(M.a)(v,2),C=N[0],y=N[1];Object(s.useEffect)((function(){b===B.CLICKABLE?(g(I[Math.floor(15*Math.random())]),y(Math.floor(2*Math.random()))):(g("transparent"),y(0))}),[b]),Object(s.useEffect)((function(){r.includes(t)&&-1!==o?u(B.CLICKABLE):u(B.EMPTY)}),[o,r,t]);return Object(n.jsx)("div",{className:"flex-grow-1 d-flex align-items-center justify-content-center",children:Object(n.jsx)("div",{"data-index":t,style:{backgroundColor:x,width:C?"50%":"90%",height:C?"50%":"90%"},onClick:function(e){var t=Number(e.target.dataset.index);if(r.includes(t)){var n=1;if(C&&(n=5),a){switch(x){case"#FF0000":c(p.points.actions.addPoint(n+5));break;case"#00CC00":c(p.points.actions.addPoint(n+3));break;default:c(p.points.actions.addPoint(n))}c(p.cubes.actions.removeCube(t));var s=Math.floor(3*Math.random());c(p.cubes.actions.initCubes(s))}}}})})},B={EMPTY:0,CLICKABLE:1},I=["#FFCC00","#663300","#CC3300","#FF0000","#CC6666","#990033","#9933CC","#660099","#0000FF","#006666","#33CCFF","#FF9900","#00FFFF","#00CC00","#99FF00"],Y=function(){var e=[],t=[];return[0,1,2,3,4,5,6,7,8,9].forEach((function(c){[0,1,2,3,4,5,6,7,8,9].forEach((function(e){t[e]=10*c+e})),e.push(function(e,t){var c=e.map((function(e,t){return Object(n.jsx)(G,{cell:e},Object(A.a)())}));return Object(n.jsx)("div",{className:"flex-grow-1 d-flex ",children:c},t)}(t,c))})),Object(n.jsx)("div",{className:"area d-flex flex-column mx-auto",children:e})},K=function(){var e=Object(i.c)(g);return Object(n.jsxs)("table",{className:"table table-striped",children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{scope:"col",children:"#"}),Object(n.jsx)("th",{scope:"col",children:"Name"}),Object(n.jsx)("th",{scope:"col",children:"Score"})]},"header")}),Object(n.jsx)("tbody",{children:e.length>0&&e.map((function(e,t){return Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{scope:"row",children:t+1}),Object(n.jsx)("td",{children:e.name}),Object(n.jsx)("td",{children:e.score})]},Object(A.a)())}))})]})},R=function(){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(P,{}),Object(n.jsx)("div",{className:"container-fluid",children:Object(n.jsxs)("div",{className:"row",children:[Object(n.jsx)("div",{className:"col-12 col-lg-9 mb-5 mb-lg-0",children:Object(n.jsx)(Y,{})}),Object(n.jsx)("div",{className:"col-12 col-lg-3",children:Object(n.jsx)(K,{})})]})})]})};c(32);r.a.render(Object(n.jsx)(i.a,{store:E,children:Object(n.jsx)(o.a,{loading:null,persistor:k,children:Object(n.jsx)(R,{})})}),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.ee4b8f99.chunk.js.map