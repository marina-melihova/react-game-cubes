(this["webpackJsonpreact-game-cubes"]=this["webpackJsonpreact-game-cubes"]||[]).push([[0],{39:function(e,t,c){},40:function(e,t,c){"use strict";c.r(t);var n=c(1),r=c(0),s=c(10),a=c.n(s),i=c(2),o=c(17),l=c(3),u=c(4),d=c(5),b=c(18),j=c.n(b),m=function(e){return e.game.phase},O=function(e){return e.game.cubes},f=function(e){return e.game.points},h=c(12),x={phase:Object(u.b)({name:"game",initialState:!1,reducers:{toggleStart:function(e){return!e}}}),cubes:Object(u.b)({name:"game",initialState:[],reducers:{initCubes:function(e,t){for(var c=t.payload,n=[];n.length!==c;){var r=Math.floor(100*Math.random());n.includes(r)||e.includes(r)||n.push(r)}return[].concat(Object(h.a)(e),n)},resetGame:function(){return[]},removeCube:function(e,t){var c=t.payload;return e.filter((function(e){return e!==c}))}}}),points:Object(u.b)({name:"game",initialState:0,reducers:{addPoint:function(e){return e+1},resetGame:function(){return 0}}})},p=function(e){return e.stats.score},v={score:Object(u.b)({name:"stats",initialState:[],reducers:{inputName:function(e,t){var c=t.payload;return[].concat(Object(h.a)(e),[c])}}})},g=Object(l.c)({phase:x.phase.reducer,cubes:x.cubes.reducer,points:x.points.reducer}),N={key:"stats",storage:j.a,whitelist:["score"]},C=Object(l.c)({score:v.score.reducer}),y=Object(d.g)(N,C),w=Object(u.a)({reducer:{game:g,stats:y},middleware:Object(u.c)({serializableCheck:{ignoredActions:[d.a,d.f,d.b,d.c,d.d,d.e]}})}),S=Object(d.h)(w),E=c(6);var F=function(e){var t=e.closeModal,c=Object(i.c)((function(e){return f(e)})),s=Object(i.b)(),a=Object(r.useState)(""),o=Object(E.a)(a,2),l=o[0],u=o[1];return Object(n.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n={name:l,score:c};console.log("record",n),s(v.score.actions.inputName(n)),t()},className:"p-5",children:[Object(n.jsxs)("div",{className:"mb-5",children:["Your score: ",Object(n.jsx)("span",{children:c})]}),Object(n.jsxs)("div",{className:"form-group d-flex",children:[Object(n.jsx)("label",{htmlFor:"username",className:"mr-3 mb-5",children:"Name"}),Object(n.jsx)("input",{id:"username",name:"username",value:l,onChange:function(e){var t=e.target;u(t.value)},type:"text",className:"form-control"})]}),Object(n.jsx)("button",{type:"submit",className:"btn btn-primary mx-auto",children:"Save"})]})},k=c(19),M=c(20);function L(){var e=Object(k.a)(["\n  width: 100%;\n  height: 100%;\n  background-color: rgb(128, 128, 128, 0.65);\n  position: fixed;\n  top: 0;\n  left: 0;\n  z-index: 2;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]);return L=function(){return e},e}var T=function(e){var t=e.children,c=e.closeModal,s=Object(r.useRef)(),a=Object(r.useCallback)((function(e){var t=e.target;s.current===t&&c()}),[c]),i=Object(r.useCallback)((function(e){"Escape"===e.code&&c()}),[c]);return Object(r.useEffect)((function(){return window.addEventListener("keydown",i),document.body.style.overflow="hidden",function(){window.removeEventListener("keydown",i),document.body.style.overflow="auto"}}),[i]),Object(n.jsx)(A,{ref:s,onClick:a,children:Object(n.jsx)("div",{className:"modal-dialog modal-dialog-centered",children:Object(n.jsx)("div",{className:"modal-content",children:t})})})},A=M.a.div(L()),P=function(){var e=Object(i.c)((function(e){return m(e)})),t=Object(i.c)((function(e){return f(e)})),c=Object(i.c)((function(e){return O(e)})),s=Object(i.b)(),a=Object(r.useState)(!1),o=Object(E.a)(a,2),l=o[0],u=o[1],d=function(){u((function(e){return!e}))},b=Object(r.useState)(60),j=Object(E.a)(b,2),h=j[0],p=j[1];return Object(r.useEffect)((function(){var t;return e&&(t=setTimeout((function(){p(h-1)}),1e3)),0===h&&e&&(s(x.phase.actions.toggleStart()),u(!0)),function(){clearTimeout(t)}}),[e,h]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("header",{className:"jumbotron jumbotron-fluid py-3",children:Object(n.jsxs)("div",{className:"row justify-content-between px-3 px-md-0 ",children:[Object(n.jsxs)("div",{className:"col-12 col-md-8 pl-md-5",children:[Object(n.jsx)("h1",{className:"display-6",children:"Remove cubes"}),Object(n.jsxs)("div",{className:"d-flex align-items-center justify-content-between text-center",children:[Object(n.jsxs)("div",{children:[Object(n.jsx)("button",{type:"button",className:"btn btn-primary mr-2 mr-md-3",onClick:function(){c.length||s(x.cubes.actions.initCubes(35)),s(x.phase.actions.toggleStart())},disabled:!h,children:e?"PAUSE":"START"}),Object(n.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(){p(60),e&&s(x.phase.actions.toggleStart()),s(x.points.actions.resetGame()),s(x.cubes.actions.resetGame()),s(x.cubes.actions.initCubes(35))},children:"NEW GAME"})]}),Object(n.jsxs)("div",{className:"d-inline-flex flex-column",children:["Points",Object(n.jsx)("span",{className:"border border-secondary rounded-lg bg-white p-2",children:t})]}),Object(n.jsxs)("div",{className:"d-inline-flex flex-column",children:["Time left",Object(n.jsxs)("span",{className:"border border-secondary rounded-lg bg-white p-2",children:[60===h?1:0," :"," ",60===h?"00":String(h).padStart(2,"0")]})]})]})]}),Object(n.jsx)("div",{className:"d-none d-md-block col-md-3 pr-3 pt-3 pt-lg-4",children:"Lorem ipsum, dolor sit amet consectetur adipisicing elit"})]})}),l&&Object(n.jsx)(T,{closeModal:d,children:Object(n.jsx)(F,{closeModal:d})})]})},G=c(41),B=function(e){var t=e.cell,c=Object(i.b)(),s=Object(i.c)((function(e){return m(e)})),a=Object(i.c)((function(e){return O(e)})),o=Object(r.useState)(I.EMPTY),l=Object(E.a)(o,2),u=l[0],d=l[1],b=Object(r.useState)("transparent"),j=Object(E.a)(b,2),f=j[0],h=j[1];Object(r.useEffect)((function(){u===I.CLICKABLE?h(Y[Math.floor(15*Math.random())]):h("transparent")}),[u]),Object(r.useEffect)((function(){s&&a.includes(t)?d(I.CLICKABLE):d(I.EMPTY)}),[s,a]);return Object(n.jsx)("div",{className:"cube",style:{backgroundColor:f},"data-index":t,onClick:function(e){var t=Number(e.target.dataset.index);if(a.includes(t)){c(x.cubes.actions.removeCube(t)),c(x.points.actions.addPoint());var n=Math.floor(3*Math.random());c(x.cubes.actions.initCubes(n))}}})},I={EMPTY:0,CLICKABLE:1},Y=["#FFCC00","#663300","#CC3300","#FF0000","#CC6666","#990033","#9933CC","#660099","#0000FF","#006666","#33CCFF","#FF9900","#00FFFF","#00CC00","#99FF00"];var K=function(){var e=[],t=[];return[0,1,2,3,4,5,6,7,8,9].forEach((function(c){[0,1,2,3,4,5,6,7,8,9].forEach((function(e){t[e]=10*c+e})),e.push(function(e,t){var c=e.map((function(e,t){return Object(n.jsx)(B,{cell:e},Object(G.a)())}));return Object(n.jsx)("div",{className:"area-row",children:c},t)}(t,c))})),Object(n.jsx)("div",{className:"area",children:e})};var R=function(){var e=Object(i.c)((function(e){return p(e)}));return Object(n.jsxs)("table",{className:"table table-striped",children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{scope:"col",children:"#"}),Object(n.jsx)("th",{scope:"col",children:"Name"}),Object(n.jsx)("th",{scope:"col",children:"Score"})]},"header")}),Object(n.jsx)("tbody",{children:e.length>0&&e.map((function(e,t){return Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{scope:"row",children:t+1}),Object(n.jsx)("td",{children:e.name}),Object(n.jsx)("td",{children:e.score})]},Object(G.a)())}))})]})},z=function(){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(P,{}),Object(n.jsx)("div",{className:"container-fluid",children:Object(n.jsxs)("div",{className:"row",children:[Object(n.jsx)("div",{className:"col-12 col-lg-9 mb-5 mb-lg-0",children:Object(n.jsx)(K,{})}),Object(n.jsx)("div",{className:"col-12 col-lg-3",children:Object(n.jsx)(R,{})})]})})]})};c(39);a.a.render(Object(n.jsx)(i.a,{store:w,children:Object(n.jsx)(o.a,{loading:null,persistor:S,children:Object(n.jsx)(z,{})})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.c6d36b1e.chunk.js.map